<!DOCTYPE html>
<html>
<head>
    <title>Godel's Gauntlet</title>
    <style>
        body { position: relative; }
        a { position: absolute; top: 10px; left: 10px; z-index: 2; }
        canvas { position: absolute; top: 0; left: 0; z-index: 1; }
    </style>
</head>
<body>
    <a href="https://github.com/thetechnocrat-dev/thetechnocrat-dev.github.io/blob/main/index.html#L158" target="_blank">
      <img src="github-logo.png" alt="GitHub Logo" width="24" height="24">
      <span>This game is open source</span>
    </a>
    <canvas id="gameCanvas"></canvas>
    <script>
        var canvas = document.getElementById('gameCanvas');
        var ctx = canvas.getContext('2d');

        // Set canvas size to fill the window
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        // Player and goal objects
        var player = { 
            x: canvas.width / 2, 
            y: 50,
            radius: 20, 
            vx: 0, 
            vy: 0, 
            speed: 0.1, 
            maxSpeed: 3
        };
        var goal = { 
            x: canvas.width / 2, 
            y: canvas.height / 2, 
            radius: 30, 
            angle1: 0, 
            angle2: 0, 
            angle3: 0 
        };

        // Listen for click events
        canvas.addEventListener('click', function(e) {
            if (e.target.nodeName !== 'A') {
                var rect = canvas.getBoundingClientRect();
                var clickX = e.clientX - rect.left;
                var clickY = e.clientY - rect.top;

                // Set the player's target
                player.target = { x: clickX, y: clickY };

                // Store the last click position
                lastClick.x = clickX;
                lastClick.y = clickY;
            }
        });

        // Main game loop
        function gameLoop() {
            // Move towards target if it exists
            if(player.target) {
                var dx = player.target.x - player.x;
                var dy = player.target.y - player.y;
                var distance = Math.sqrt(dx * dx + dy * dy);

                if(distance > 1) {
                    // Apply velocity to player position
                    player.vx = dx / distance * player.speed;
                    player.vy = dy / distance * player.speed;
                    player.x += player.vx;
                    player.y += player.vy;

                    // Accelerate
                    player.speed += 0.1;
                    if(player.speed > player.maxSpeed) {
                        player.speed = player.maxSpeed;
                    }
                } else {
                    // Decelerate
                    player.speed -= 0.1;
                    if(player.speed < 0) {
                        player.speed = 0;
                    }
                }
            }

            // Clear the canvas
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // Create and store the path for the first rotating circle
            var circlePath1 = new Path2D();
            goal.angle1 += 0.01;
            var startAngle = goal.angle1;
            var endAngle = startAngle + Math.PI * 2 - player.radius * 3 / goal.radius;
            circlePath1.arc(goal.x, goal.y, goal.radius * 3, startAngle, endAngle);
            ctx.strokeStyle = 'red';
            ctx.lineWidth = 5;
            ctx.stroke(circlePath1);

            // Create and store the path for the second rotating circle
            var circlePath2 = new Path2D();
            goal.angle2 -= 0.01;
            startAngle = goal.angle2;
            endAngle = startAngle + Math.PI * 2 - player.radius * 3 / goal.radius;
            circlePath2.arc(goal.x, goal.y, goal.radius * 2.5, startAngle, endAngle);
            ctx.strokeStyle = 'blue';
            ctx.lineWidth = 5;
            ctx.stroke(circlePath2);

            // Create and store the path for the third rotating circle
            var circlePath3 = new Path2D();
            goal.angle3 = Math.atan2(player.y - goal.y, player.x - goal.x) + Math.PI;
            startAngle = goal.angle3;
            endAngle = startAngle + Math.PI * 2 - player.radius * 3 / goal.radius;
            circlePath3.arc(goal.x, goal.y, goal.radius * 2, startAngle, endAngle);
            ctx.strokeStyle = 'purple';
            ctx.lineWidth = 5;
            ctx.stroke(circlePath3);

            // Check for collision with the rotating circles
            if(!player.reset && 
                (ctx.isPointInStroke(circlePath1, player.x, player.y) ||
                 ctx.isPointInStroke(circlePath2, player.x, player.y) ||
                 ctx.isPointInStroke(circlePath3, player.x, player.y))) {
                player.reset = true;
                player.flash = 3;
                setTimeout(() => {player.reset = false}, 3000); // Wait for 3 seconds before resetting
            }

            // Reset and flash the player
            if(player.reset) {
                player.x = canvas.width / 2;
                player.y = 50;
                player.vx = 0;
                player.vy = 0;
            
                if(player.flash > 0) {
                    ctx.globalAlpha = 0.5;
                    player.flash--;
                } else {
                    player.reset = false;
                }
            } else {
                ctx.globalAlpha = 1;
            }

            // Draw the player
            ctx.beginPath();
            ctx.arc(player.x, player.y, player.radius, 0, Math.PI * 2);
            ctx.fillStyle = 'blue';
            ctx.fill();

            // Draw the goal
            ctx.beginPath();
            ctx.arc(goal.x, goal.y, goal.radius, 0, Math.PI * 2);
            ctx.fillStyle = 'green';
            ctx.fill();

            // Check for collision with the goal
            var dx = player.x - goal.x;
            var dy = player.y - goal.y;
            var distance = Math.sqrt(dx * dx + dy * dy);
            if(distance < player.radius + goal.radius) {
                alert('You reached the goal!');
                player.x = canvas.width / 2;
                player.y = 50;
                player.vx = 0;
                player.vy = 0;
            }

            // Wrap player circle if out of screen bounds
            if (player.x < -player.radius) player.x = canvas.width + player.radius;
            if (player.x > canvas.width + player.radius) player.x = -player.radius;
            if (player.y < -player.radius) player.y = canvas.height + player.radius;
            if (player.y > canvas.height + player.radius) player.y = -player.radius;

            // Request next animation frame
            requestAnimationFrame(gameLoop);
        }

        gameLoop();
    </script>
    <script>
        var githubLink = document.getElementById('github-link');
        githubLink.addEventListener('click', function(event) {
          event.stopPropagation();
        });
      </script>
</body>
</html>
